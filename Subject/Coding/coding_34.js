---------------------------------------------------------------------------------------------
34
⋙ ❍ Как можно сделать объект иммутабельным? Вопрос об Object.freeze?
---
Для создания иммутабельного объекта в JavaScript вы можете использовать метод `Object.freeze()`. Этот метод "замораживает" объект, делая его неизменяемым: нельзя добавлять новые свойства, изменять существующие или удалять их.
Вот как вы можете использовать `Object.freeze()` для создания иммутабельного объекта:
```javascript
const obj = {
  property1: 'value1',
  property2: 'value2'
};

// Замораживаем объект
Object.freeze(obj);

// Попытка изменить свойство объекта
obj.property1 = 'new value'; // Не будет совершено никаких изменений
```
Вы также можете использовать `Object.freeze()` в сочетании с рекурсивным проходом по объекту для замораживания всех вложенных объектов и создания глубокой иммутабельности:
```javascript
function deepFreeze(obj) {
  // Получаем имена всех свойств объекта
  const propNames = Object.getOwnPropertyNames(obj);

  // Замораживаем все свойства объекта
  propNames.forEach(function(name) {
    const prop = obj[name];

    // Если свойство является объектом и не было заморожено ранее, замораживаем его
    if (typeof prop === 'object' && prop !== null && !Object.isFrozen(prop)) {
      deepFreeze(prop);
    }
  });

  // Замораживаем сам объект
  return Object.freeze(obj);
}

const obj = {
  nested: {
    property1: 'value1',
    property2: 'value2'
  }
};

deepFreeze(obj);

// Попытка изменить вложенное свойство объекта
obj.nested.property1 = 'new value'; // Не будет совершено никаких изменений
```
Таким образом, использование `Object.freeze()` позволяет создать объект, который не может быть изменен, что обеспечивает безопасность данных и предотвращает неожиданные изменения в приложении.
---------------------------------------------------------------------------------------------
